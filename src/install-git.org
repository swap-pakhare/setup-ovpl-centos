#+TITLE: Install git from sources
#+AUTHOR: VLEAD
#+DATE: [2017-11-07 Tue]
#+SETUPFILE: ./org-templates/level-0.org
#+TAGS: boilerplate(b)
#+EXCLUDE_TAGS: boilerplate
#+OPTIONS: ^:nil

* Introduction
  This document lists the steps required to install git from
  sources on centos 6.9.

* Installation of git 2.7.4
  Refer stackoverflow [[https://stackoverflow.com/questions/21820715/how-to-install-latest-version-of-git-on-centos-6-x-7-x][post]]

** Update the machine
#+NAME: update
#+BEGIN_SRC sh 
yum update -y

#+END_SRC

** Install required packages
   This installs dependencies: curl-devel, expat-devel,
   gettext-devel, openssl-devel, zlib-devel, gcc,
   perl-ExtUtils-MakeMaker

#+NAME: req-pkgs
#+BEGIN_SRC sh 
yum install curl-devel expat-devel gettext-devel openssl-devel zlib-devel -y
yum install  gcc perl-ExtUtils-MakeMaker -y

#+END_SRC

** Remove existing git version
   This removes if there is any existing git installed via
   yum package manager.
#+NAME: remove-git
#+BEGIN_SRC sh 
yum remove git -y

#+END_SRC

** Install git from sources
   1. get the sources for version =2.7.4=
   2. build the sources
   3. set the path for the git

#+NAME: git-src
#+BEGIN_SRC sh
cd /usr/src
wget https://www.kernel.org/pub/software/scm/git/git-2.7.4.tar.gz
tar xzf git-2.7.4.tar.gz
cd git-2.7.4
make prefix=/usr/local/git all
make prefix=/usr/local/git install
echo 'export PATH=$PATH:/usr/local/git/bin' >> /etc/bashrc
export PATH=$PATH:/usr/local/git/bin

#+END_SRC

** Bash
   This script will be a bash script.
#+NAME: shebang
#+BEGIN_SRC sh
#!/bin/bash

#+END_SRC

** Exit
   Exit with return =0= when all is successful at the end. 

#+NAME: exit
#+BEGIN_SRC sh
exit 0

#+END_SRC

* Tangle     :boilerplate:
#+BEGIN_SRC sh :tangle scripts/install-git.sh :eval no :noweb yes
<<shebang>>
<<update>>
<<req-pkgs>>
<<remove-git>>
<<git-src>>
<<exit>>
#+END_SRC
